{% extends 'base.html' %} {% load static %} {% block head %}
<link rel="stylesheet" href="{% static 'css/pokemon/pokemon-detail.css' %}" />
{% endblock %} {% block content %}
<section class="pokemon-container">
  <div class="pokemon-img">
    <img
      src="{{ pokemon.img }}"
      alt="{{ pokemon.name }}"
      style="max-height: 250px"
    />
  </div>
  <div class="pokemon-details">
    <h1>{{ pokemon.name }}</h1>
    <h2>A level {{ pokemon.level }} {{ pokemon.types }} type.</h2>
    <p>{{ pokemon.description }}</p>

    <div class="pokemon-actions">
      <a href="{% url 'pokemon-update' pokemon.id %}" class="btn warn">Edit</a>
      <a href="{% url 'pokemon-delete' pokemon.id %}" class="btn danger"
        >Delete</a
      >
    </div>
  </div>
</section>

<div class="battles-item-container">
  <section class="battles">
    <div class="subsection-title">
      <h2>Battles</h2>
      <img
        src="https://toppng.com/uploads/preview/pokemon-11530983579xjgejrvwml.png"
        alt="angry pikachu"
      />
    </div>
    <form
      action="{% url 'add-battle' pokemon.id %}"
      method="post"
      class="subsection-content"
      autocomplete="off"
    >
      {% csrf_token %} {{ battle_form.as_p }}
      <button type="submit" class="btn submit">Add Battle</button>
    </form>
    <h3>Past Battles</h3>
    {% if pokemon.battle_set.all.count %}
    <table>
      <thead>
        <tr>
          <th>Date</th>
          <th>Trainer Type</th>
        </tr>
      </thead>
      <tbody>
        {% for battle in pokemon.battle_set.all %}
        <tr>
          <td>{{battle.date}}</td>
          <td>{{battle.get_trainer_display}}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <div class="subsection-content">
      <p>⚠️ {{pokemon.name}} has not battled yet!</p>
    </div>
    {% endif %}
  </section>

  <section class="items">
    <div class="subsection-title">
      <h2>Items</h2>
      <img
        src="https://archives.bulbagarden.net/media/upload/7/79/Dream_Pok%C3%A9_Ball_Sprite.png"
        alt="A pokeball"
      />
      <img
        src="https://archives.bulbagarden.net/media/upload/d/df/Dream_Potion_Sprite.png"
        alt="A potion"
      />
      <img
        src="https://archives.bulbagarden.net/media/upload/c/ce/Dream_HP_Up_Sprite.png"
        alt="An HP up"
      />
      <img
        src="https://archives.bulbagarden.net/media/upload/0/0c/Dream_Oran_Berry_Sprite.png"
        alt="An oran berry"
      />
    </div>
    <h3>{{ pokemon.name }}'s Items</h3>
    <div class="subsection-content">
      {% if pokemon.items.count %} {% for item in pokemon.items.all %}
      <div class="item-container">
        <img
          src="{{ item.img }}"
          alt="{{ item.name }}"
          style="max-height: 50px"
        />
        <a href="{% url 'item-detail' item.id %}">
          <p>{{ item.name }}</p>
        </a>
        <form action="{% url 'remove-item' pokemon.id item.id %}" method="post">
          {% csrf_token %}
          <button type="submit" class="btn btn-danger">Remove Item</button>
        </form>
      </div>
      {% endfor %} {% else %}
      <p class="no-items">{{pokemon.name}} doesn't have any items!</p>
      {% endif %}
    </div>
    <h3>Available Items</h3>
    <div class="subsection-content">
      {% if items.count %} {% for item in items.all %}
      <div class="item-container">
        <img
          src="{{ item.img }}"
          alt="{{ item.name }}"
          style="max-height: 50px"
        />
        <a href="{% url 'item-detail' item.id %}">
          <p>{{ item.name }}</p>
        </a>
        <form
          action="{% url 'associate-item' pokemon.id item.id %}"
          method="post"
        >
          {% csrf_token %}
          <button type="submit" class="btn submit">Give item</button>
        </form>
      </div>
      {% endfor %} {% else %}
      <p class="all-items">
        {{pokemon.name}} already has all the available items.
      </p>
      {% endif %}
    </div>
  </section>
</div>

{% endblock %}
